<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>리뷰 관리 - HealnGo</title>
    <link rel="stylesheet" href="/crm/css/company_review.css">
    <link rel="stylesheet" href="/crm/css/company_sidebar.css">
    <link rel="stylesheet" href="/crm/css/company_header.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
<div class="dashboard-container">
    <!-- 사이드바 -->
    <div th:replace="common/company_sidebar :: company_sidebar"></div>

    <!-- 메인 콘텐츠 -->
    <div class="main-content">
        <!-- 헤더 -->
        <div th:replace="common/company_header :: company_header"></div>

        <!-- 리뷰 관리 콘텐츠 -->
        <div class="review-management">
            <!-- 페이지 제목 -->
            <div class="page-header">
                <h1>리뷰관리</h1>
                <p>고객 리뷰를 확인하고 답변을 작성하세요.</p>
            </div>

            <!-- 통계 카드 -->
            <div class="stats-cards">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-comments"></i>
                    </div>
                    <div class="stat-content">
                        <h3 th:text="${totalReviews}">26</h3>
                        <p>전체 리뷰</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-content">
                        <h3 th:text="${pendingReplies}">3</h3>
                        <p>답변 대기</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-check"></i>
                    </div>
                    <div class="stat-content">
                        <h3 th:text="${completedReplies}">16</h3>
                        <p>답변 완료</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="stat-content">
                        <h3 th:text="${averageRating}">4.7</h3>
                        <p>평균 평점</p>
                    </div>
                </div>
            </div>

            <!-- 검색 및 필터 -->
            <div class="search-filter-section">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="시술명 또는 고객명으로 검색" id="reviewSearch">
                </div>
                <div class="filter-buttons">
                    <button class="filter-btn active" data-filter="all">전체</button>
                    <button class="filter-btn" data-filter="pending">답변대기</button>
                    <button class="filter-btn" data-filter="completed">답변완료</button>
                    <button class="filter-btn" data-filter="high-rating">높은평점</button>
                    <button class="filter-btn" data-filter="low-rating">낮은평점</button>
                </div>
            </div>

            <!-- 리뷰 목록 및 상세 -->
            <div class="review-content">
                <!-- 리뷰 목록 -->
                <div class="review-list">
                    <!-- 리뷰 목록이 JavaScript로 동적으로 생성됩니다 -->
                </div>

                <!-- 리뷰 상세 -->
                <div class="review-detail">
                    <!-- 리뷰 상세 내용이 JavaScript로 동적으로 생성됩니다 -->
                    <div class="detail-header">
                        <span class="review-id">#0000</span>
                        <span class="status-badge pending">답변 대기</span>
                    </div>

                    <div class="detail-rating">
                        <div class="stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                        <span class="rating-score">0</span>
                    </div>

                    <div class="detail-info">
                        <h3>리뷰를 선택해주세요</h3>
                        <p class="customer">고객 : -</p>
                        <div class="detail-meta">
                            <span class="date">작성일: -</span>
                            <span class="price">시술 금액: -</span>
                        </div>
                    </div>

                    <div class="review-content-box">
                        <h4>고객 리뷰</h4>
                        <div class="customer-review">
                            왼쪽에서 리뷰를 선택해주세요.
                        </div>
                    </div>

                    <div class="reply-section">
                        <h4>판매자 답변</h4>
                        <div class="seller-reply">
                            <p class="no-reply">아직 답글이 없습니다.</p>
                        </div>
                    </div>

                    <div class="reply-edit-section" style="display: none;">
                        <h4>답변 수정</h4>
                        <textarea class="reply-textarea" placeholder="답변을 입력하세요..."></textarea>
                        <div class="reply-buttons">
                            <button class="cancel-btn">취소</button>
                            <button class="save-btn">답변 수정</button>
                        </div>
                    </div>

                    <div class="reply-actions">
                        <button class="edit-reply-btn" id="replyWriteBtn" style="display: none;">답글 작성</button>
                        <button class="edit-reply-btn" id="replyEditBtn" style="display: none;">답글 수정</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="/crm/js/review_api.js"></script>
<script src="/crm/js/company_sidebar.js"></script>
<script src="/crm/js/company_header.js"></script>
<script src="/crm/js/company_review_new.js"></script>
</body>
</html>
