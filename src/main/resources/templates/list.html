<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>HealnGo - 병원 목록</title>
    <link rel="stylesheet" href="/resources/css/styles.css">
    <link rel="stylesheet" href="/resources/css/list.css">
    <link rel="stylesheet" href="/resources/css/pagination.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script>
        window.APP_CTX = '';
    </script>
</head>
<body>
        <div th:replace="~{common/header :: header}"></div>

<!-- ✅ main-container 바로 아래에 left/right 가 오도록 -->
<div class="main-container">

        <!-- 왼쪽: 필터 + 목록 -->
        <div class="left-panel">

            <!-- 지역 정보 -->
            <div class="region-info">
                <h2>선택된 지역: <span th:text="${region}">전국</span></h2>
            </div>

            <!-- 결과 정보 -->
            <div class="result-info">
                <!-- 총 건수: 서버가 내려준 totalCount만 보여주도록 -->
                <div class="total-count" th:data-total-count="${totalCount}">
                  총 <span th:text="${totalCount}">0</span>건
                </div>
            </div>

         <!-- 병원 목록 (DB 데이터) -->
         <div class="hospital-list">
             <div th:each="h : ${lists}" class="hospital-item"
                  th:data-item-id="${h.id}"
                  th:data-hospital="${h.name}"
                  th:data-address="${h.address}"
                  th:data-phone="${h.phone}"
                  th:data-homepage="${h.homepage}"
                  th:data-region="${h.region}"
                  th:data-subregion="${h.subregion}">

                 <!-- ❤️ 하트 버튼만 클릭 시 찜 기능 실행 -->
                 <div class="hospital-heart">
                     <i class="far fa-heart"></i>
                 </div>

                 <!-- 병원 이름 등 정보 출력 -->
                 <div class="hospital-name" th:text="${h.name}">
                     병원명
                 </div>
             </div>

             <div th:if="${lists == null or lists.empty}" class="detail-empty">
                 <i class="empty"></i>
                 <p>표시할 결과가 없습니다.</p>
             </div>
         </div>

       <!-- Pagination Fragment -->
       <div th:replace="~{common/pagination :: pagination}"></div>

        </div><!-- /.left-panel -->

        <!-- 오른쪽: 상세 패널 -->
        <div class="right-panel">
            <div class="detail-container">
                <div class="detail-placeholder">
                    <i class="fas fa-hospital"></i>
                    <p>병원을 선택해주세요</p>
                </div>
                <div class="detail-content" style="display: none;">
                    <!-- AJAX로 상세 정보가 표시됩니다 -->
                </div>
            </div>
        </div><!-- /.right-panel -->

</div><!-- /.main-container -->

<!-- 구글맵 API 스크립트 -->
<script async
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB41DRUbKWJHPxaFjMAwdrzWzbVKartNGg&libraries=places&callback=initMap">
</script>
<script>
// Google Maps API 로드 확인
window.addEventListener('load', function() {
  if (typeof google !== 'undefined' && google.maps) {
    console.log('Google Maps API 로드 완료');
    console.log('Places 라이브러리 사용 가능:', !!google.maps.places);
  } else {
    console.error('Google Maps API 로드 실패');
  }
});
</script>
<script src="/resources/js/map.js"></script>
<script src="/resources/js/list.js"></script>

        <div th:replace="~{common/footer :: footer}"></div>
</body>
</html>
